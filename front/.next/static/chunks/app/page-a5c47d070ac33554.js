(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{492:(e,r,t)=>{Promise.resolve().then(t.bind(t,628))},628:(e,r,t)=>{"use strict";t.d(r,{default:()=>n});var s=t(5155),l=t(2115),a=t(3464),o=t(6874),i=t.n(o),c=t(5695);function n(e){let{initialArticles:r,total:t,initialPage:o=1}=e,[n,d]=(0,l.useState)(r),[u,h]=(0,l.useState)(""),[x,g]=(0,l.useState)(!1),[m,p]=(0,l.useState)(""),[b,v]=(0,l.useState)(o),y=(0,c.useRouter)(),f=(0,c.useSearchParams)(),j=Math.ceil(t/10),w=(0,l.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;g(!0);try{let t=await a.A.get("".concat("http://localhost:5000","/api/articles"),{params:{search:e,page:r,limit:10}});d(t.data.articles),p("")}catch(e){p("Failed to load articles")}g(!1)},[10,u]);(0,l.useEffect)(()=>{let e=setTimeout(()=>{u?(w(u,1),v(1)):d(r)},300);return()=>clearTimeout(e)},[u,r,w]);let N=e=>{v(e),w(u,e);let r=new URLSearchParams(f.toString());r.set("page",e.toString()),y.push("/?".concat(r.toString()))};return(0,s.jsxs)("div",{className:"flex flex-col items-center gap-8",children:[(0,s.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,s.jsx)("input",{type:"text",placeholder:"Search articles",value:u,onChange:e=>h(e.target.value),className:"border border-2 rounded-full p-4 pr-18 border-[#00000050] pl-6 w-100 bg-white shadow-sm active:border-[#000000cc]"}),u?(0,s.jsx)("button",{type:"button",onClick:()=>h(""),className:"bg-gray-200 cursor-pointer text-gray-600 my-[8px] px-3 -ml-18 rounded-full hover:bg-gray-300 shadow flex items-center justify-center","aria-label":"Clear",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,s.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}):(0,s.jsx)("button",{type:"submit",className:"bg-blue-600 cursor-pointer text-white my-[8px] px-3 -ml-18 rounded-full hover:bg-blue-700 shadow flex items-center justify-center","aria-label":"Search",children:(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("circle",{cx:"11",cy:"11",r:"7",stroke:"currentColor",strokeWidth:"2"}),(0,s.jsx)("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})})]}),x?(0,s.jsx)("div",{children:"Loading articles..."}):m?(0,s.jsx)("div",{className:"text-red-500",children:m}):(0,s.jsxs)(s.Fragment,{children:[u&&(0,s.jsx)("div",{className:"text-gray-600 mb-4",children:0===n.length?(0,s.jsxs)("p",{children:['No articles found for "',u,'"']}):(0,s.jsxs)("p",{children:["Found ",n.length," article",1!==n.length?"s":"",' for "',u,'"']})}),(0,s.jsxs)("ul",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8",children:[0===n.length&&!u&&(0,s.jsx)("li",{children:"No articles found."}),n.map(e=>{var r,t,l;return(0,s.jsx)("li",{className:"opacity-97 border-[#00000040] border-1 hover:opacity-100 hover:scale-101 bg-white rounded-2xl shadow group cursor-pointer transition hover:shadow-lg",children:(0,s.jsxs)(i(),{href:"/article/".concat(e.slug),className:"block h-full",children:[(null==(l=e.media)||null==(t=l.images)||null==(r=t[0])?void 0:r.url)&&(0,s.jsx)("img",{src:e.media.images[0].url,alt:e.media.images[0].alt||e.title,className:"w-full h-56 object-cover rounded-t-2xl"}),(0,s.jsx)("div",{className:"p-4",children:(0,s.jsx)("div",{className:"text-xl font-extrabold text-gray-900 mb-2 leading-tight",children:e.title})})]})},e.slug)})]}),!u&&j>1&&(0,s.jsxs)("div",{className:"flex gap-2 mt-8",children:[(0,s.jsx)("button",{onClick:()=>N(b-1),disabled:1===b,className:"px-3 py-1 rounded bg-gray-200 disabled:opacity-50",children:"Previous"}),Array.from({length:j},(e,r)=>r+1).map(e=>(0,s.jsx)("button",{onClick:()=>N(e),className:"px-3 py-1 rounded ".concat(e===b?"bg-blue-600 text-white":"bg-gray-100"),children:e},e)),(0,s.jsx)("button",{onClick:()=>N(b+1),disabled:b===j,className:"px-3 py-1 rounded bg-gray-200 disabled:opacity-50",children:"Next"})]})]})]})}},5695:(e,r,t)=>{"use strict";var s=t(8999);t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})}},e=>{var r=r=>e(e.s=r);e.O(0,[874,464,441,684,358],()=>r(492)),_N_E=e.O()}]);