(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{813:(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var s=n(5155),r=n(2115);let l=e=>{let{content:t,media:n}=e,[l,o]=(0,r.useState)(t);function a(e){return(e=(e=e.replace(/<h1[^>]*>.*?<\/h1>/i,"")).replace(/<img[^>]*>/i,"")).trim()}(0,r.useEffect)(()=>{if(!n)return void o(a(t));let e={};n.images&&n.images.length>0&&n.images.forEach((t,n)=>{let s='\n          <div class="my-6">\n            <img src="'.concat(t.url,'" alt="').concat(t.alt||"",'" class="w-full h-auto rounded-lg" />\n            ').concat(t.caption?'<p class="text-sm text-gray-600 text-center mt-2">'.concat(t.caption,"</p>"):"","\n          </div>\n        ");["[IMAGE_".concat(n,"]"),"[IMG_".concat(n,"]"),"{{IMAGE_".concat(n,"}}"),"{{IMG_".concat(n,"}}"),"\x3c!--IMAGE_".concat(n,"--\x3e"),"\x3c!--IMG_".concat(n,"--\x3e")].forEach(t=>{e[t]=s})}),n.videos&&n.videos.length>0&&n.videos.forEach((t,n)=>{let s="";if("youtube"===t.platform){let e=c(t.url);e&&(s='\n              <div class="my-6">\n                <div class="relative w-full h-0 pb-[56.25%]">\n                  <iframe \n                    src="https://www.youtube.com/embed/'.concat(e,'" \n                    class="absolute top-0 left-0 w-full h-full rounded-lg"\n                    frameborder="0" \n                    allowfullscreen>\n                  </iframe>\n                </div>\n                ').concat(t.title?'<p class="text-sm font-medium text-gray-900 mt-2">'.concat(t.title,"</p>"):"","\n              </div>\n            "))}else if("vimeo"===t.platform){let e=i(t.url);e&&(s='\n              <div class="my-6">\n                <div class="relative w-full h-0 pb-[56.25%]">\n                  <iframe \n                    src="https://player.vimeo.com/video/'.concat(e,'" \n                    class="absolute top-0 left-0 w-full h-full rounded-lg"\n                    frameborder="0" \n                    allowfullscreen>\n                  </iframe>\n                </div>\n                ').concat(t.title?'<p class="text-sm font-medium text-gray-900 mt-2">'.concat(t.title,"</p>"):"","\n              </div>\n            "))}else s='\n            <div class="my-6">\n              <video controls class="w-full rounded-lg">\n                <source src="'.concat(t.url,'" type="video/mp4">\n                Your browser does not support the video tag.\n              </video>\n              ').concat(t.title?'<p class="text-sm font-medium text-gray-900 mt-2">'.concat(t.title,"</p>"):"","\n            </div>\n          ");["[VIDEO_".concat(n,"]"),"{{VIDEO_".concat(n,"}}"),"\x3c!--VIDEO_".concat(n,"--\x3e")].forEach(t=>{e[t]=s})}),n.tweets&&n.tweets.length>0&&n.tweets.forEach((t,n)=>{let s='\n          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 my-6">\n            <div class="flex items-start space-x-3">\n              <div class="flex-shrink-0">\n                <div class="w-12 h-12 bg-blue-400 rounded-full flex items-center justify-center">\n                  <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">\n                    <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>\n                  </svg>\n                </div>\n              </div>\n              <div class="flex-1 min-w-0">\n                <p class="text-sm font-medium text-gray-900">'.concat(t.author||"Twitter User",'</p>\n                <p class="text-sm text-gray-700 mt-1">').concat(t.content||"",'</p>\n                <a href="').concat(t.url,'" target="_blank" rel="noopener noreferrer" class="text-blue-500 text-sm hover:underline mt-2 inline-block">\n                  View on Twitter â†’\n                </a>\n              </div>\n            </div>\n          </div>\n        ');["[TWEET_".concat(n,"]"),"{{TWEET_".concat(n,"}}"),"\x3c!--TWEET_".concat(n,"--\x3e")].forEach(t=>{e[t]=s})});let s=a(t);Object.entries(e).forEach(e=>{let[t,n]=e,r=RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");s=s.replace(r,n)}),o(s)},[t,n]);let c=e=>{let t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return t?t[1]:null},i=e=>{let t=e.match(/vimeo\.com\/(?:video\/)?(\d+)/);return t?t[1]:null};return(0,s.jsx)("div",{className:"prose prose-lg max-w-none mb-8",dangerouslySetInnerHTML:{__html:l}})}},3590:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var s=n(5155),r=n(2115),l=n(2108),o=n(3464),a=n(7581),c=n(6766);function i(e){let{articleId:t}=e,{data:n}=(0,l.useSession)(),[i,d]=(0,r.useState)([]),[u,m]=(0,r.useState)(""),[f,p]=(0,r.useState)(!1),[v,g]=(0,r.useState)(""),[b,h]=(0,r.useState)(!1),[y,w]=(0,r.useState)({isVisible:!1,message:"",type:"success"}),x=(0,r.useCallback)(async()=>{if(!navigator.onLine){g("Comments will load once you get connected"),w({isVisible:!0,message:"Comments will load once you get connected",type:"info"});return}try{let e=await o.A.get("".concat("http://localhost:5000","/api/comments/").concat(t),{timeout:1e4});d(e.data)}catch(o){let t="Failed to load comments";if(navigator.onLine){if("object"==typeof o&&null!==o){var e,n,s,r,l,a;"NETWORK_ERROR"===o.code||(null==(e=o.message)?void 0:e.includes("Network Error"))||(null==(n=o.message)?void 0:n.includes("fetch"))||(null==(s=o.response)?void 0:s.status)===0||"ECONNABORTED"===o.code||(null==(r=o.message)?void 0:r.includes("timeout"))?t="Comments will load once you get connected":(null==(a=o.response)||null==(l=a.data)?void 0:l.message)&&(t=o.response.data.message)}}else t="Comments will load once you get connected";g(t),"Comments will load once you get connected"===t&&w({isVisible:!0,message:t,type:"info"})}},[t]);(0,r.useEffect)(()=>{x()},[t,x]),(0,r.useEffect)(()=>{let e=()=>{h(!1),(v.includes("will be posted")||v.includes("will load"))&&g("")},t=()=>{h(!0)};return window.addEventListener("online",e),window.addEventListener("offline",t),h(!navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[v]);let j=async e=>{if(e.preventDefault(),u.trim()){if(g(""),p(!0),!navigator.onLine){h(!0),w({isVisible:!0,message:"Comment will be posted once you get connected",type:"info"}),g("Comment will be posted once you get connected"),p(!1);return}try{let e=await o.A.post("".concat("http://localhost:5000","/api/comments/").concat(t),{content:u},{headers:{Authorization:"Bearer ".concat(null==n?void 0:n.backendToken)},timeout:1e4});d([e.data,...i]),m(""),g(""),w({isVisible:!0,message:"Comment posted successfully!",type:"success"})}catch(t){let e="Failed to post comment";if(navigator.onLine){if("object"==typeof t&&null!==t){var s,r,l,a,c,f;"NETWORK_ERROR"===t.code||(null==(s=t.message)?void 0:s.includes("Network Error"))||(null==(r=t.message)?void 0:r.includes("fetch"))||(null==(l=t.response)?void 0:l.status)===0||"ECONNABORTED"===t.code||(null==(a=t.message)?void 0:a.includes("timeout"))?(e="Comment will be posted once you get connected",h(!0)):(null==(f=t.response)||null==(c=f.data)?void 0:c.message)&&(e=t.response.data.message)}}else e="Comment will be posted once you get connected",h(!0);g(e),w({isVisible:!0,message:e,type:e.includes("will be posted")||e.includes("will load")?"info":"error"})}finally{p(!1)}}};return(0,s.jsxs)("div",{className:"mt-8",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:["Comments (",i.length,")"]}),n?(0,s.jsxs)("form",{onSubmit:j,className:"mb-6",children:[(0,s.jsx)("textarea",{value:u,onChange:e=>m(e.target.value),placeholder:"Write a comment...",className:"w-full p-3 border rounded-lg resize-none",rows:3,disabled:f}),(0,s.jsx)("button",{type:"submit",disabled:f||!u.trim()||b,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:f?"Posting...":b?"Offline":"Post Comment"})]}):(0,s.jsx)("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:(0,s.jsx)("p",{children:"Please log in to comment."})}),(0,s.jsx)("div",{className:"space-y-4",children:0===i.length?(0,s.jsx)("p",{className:"text-gray-500",children:"No comments yet. Be the first to comment!"}):i.map(e=>(0,s.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e.userAvatar&&(0,s.jsx)(c.default,{src:e.userAvatar,alt:e.userName,className:"w-8 h-8 rounded-full",width:32,height:32}),(0,s.jsx)("span",{className:"font-medium",children:e.userName}),(0,s.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,s.jsx)("p",{className:"text-gray-700",children:e.content})]},e._id))}),(0,s.jsx)(a.A,{message:y.message,type:y.type,isVisible:y.isVisible,onClose:()=>{w(e=>({...e,isVisible:!1}))},duration:4e3})]})}},4436:(e,t,n)=>{"use strict";n.d(t,{k5:()=>d});var s=n(2115),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=s.createContext&&s.createContext(r),o=["attr","size","title"];function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var s,r,l;s=e,r=t,l=n[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in s?Object.defineProperty(s,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[r]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(e){return t=>s.createElement(u,a({attr:i({},e.attr)},t),function e(t){return t&&t.map((t,n)=>s.createElement(t.tag,i({key:n},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var n,{attr:r,size:l,title:c}=e,d=function(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(s=0;s<l.length;s++)n=l[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,o),u=l||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),s.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:n,style:i(i({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),c&&s.createElement("title",null,c),e.children)};return void 0!==l?s.createElement(l.Consumer,null,e=>t(e)):t(r)}},6887:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6874,23)),Promise.resolve().then(n.t.bind(n,3063,23)),Promise.resolve().then(n.bind(n,813)),Promise.resolve().then(n.bind(n,3590))},7581:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});var s=n(5155),r=n(2115),l=n(9911);let o=e=>{let{message:t,type:n="success",isVisible:o,onClose:a,duration:c=4e3}=e,[i,d]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{if(o){d(!0);let e=setTimeout(()=>{d(!1),setTimeout(()=>{a()},300)},c);return()=>clearTimeout(e)}},[o,c,a]),o)?(0,s.jsx)("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:transform sm:-translate-x-1/2 sm:max-w-sm z-[9999] px-0 sm:px-4",children:(0,s.jsx)("div",{className:"\n          ".concat((()=>{switch(n){case"success":default:return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"info":return"bg-yellow-100 border-yellow-200"}})(),"\n          ").concat((()=>{switch(n){case"success":default:return"text-green-800";case"error":return"text-red-800";case"info":return"text-yellow-800"}})(),"\n          border rounded-lg shadow-lg p-4\n          transform transition-all duration-300 ease-out\n          ").concat(i?"translate-y-0 opacity-100 scale-100":"translate-y-full opacity-0 scale-95","\n        "),children:(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(n){case"success":default:return(0,s.jsx)(l.A7C,{className:"h-5 w-5 text-green-500"});case"error":return(0,s.jsx)(l._Hm,{className:"h-5 w-5 text-red-500"});case"info":return(0,s.jsx)(l.__w,{className:"h-5 w-5 text-yellow-600"})}})()}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("p",{className:"text-sm font-medium text-center sm:text-left",children:t})})]})})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[711,108,874,464,766,441,684,358],()=>t(6887)),_N_E=e.O()}]);