(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[225],{813:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(5155),s=n(2115);let a=e=>{let{content:t,media:n}=e,[a,l]=(0,s.useState)(t);function o(e){return(e=(e=e.replace(/<h1[^>]*>.*?<\/h1>/i,"")).replace(/<img[^>]*>/i,"")).trim()}(0,s.useEffect)(()=>{if(!n)return void l(o(t));let e={};n.images&&n.images.length>0&&n.images.forEach((t,n)=>{let r='\n          <div class="my-6">\n            <img src="'.concat(t.url,'" alt="').concat(t.alt||"",'" class="w-full h-auto rounded-lg" />\n            ').concat(t.caption?'<p class="text-sm text-gray-600 text-center mt-2">'.concat(t.caption,"</p>"):"","\n          </div>\n        ");["[IMAGE_".concat(n,"]"),"[IMG_".concat(n,"]"),"{{IMAGE_".concat(n,"}}"),"{{IMG_".concat(n,"}}"),"\x3c!--IMAGE_".concat(n,"--\x3e"),"\x3c!--IMG_".concat(n,"--\x3e")].forEach(t=>{e[t]=r})}),n.videos&&n.videos.length>0&&n.videos.forEach((t,n)=>{let r="";if("youtube"===t.platform){let e=c(t.url);e&&(r='\n              <div class="my-6">\n                <div class="relative w-full h-0 pb-[56.25%]">\n                  <iframe \n                    src="https://www.youtube.com/embed/'.concat(e,'" \n                    class="absolute top-0 left-0 w-full h-full rounded-lg"\n                    frameborder="0" \n                    allowfullscreen>\n                  </iframe>\n                </div>\n                ').concat(t.title?'<p class="text-sm font-medium text-gray-900 mt-2">'.concat(t.title,"</p>"):"","\n              </div>\n            "))}else if("vimeo"===t.platform){let e=i(t.url);e&&(r='\n              <div class="my-6">\n                <div class="relative w-full h-0 pb-[56.25%]">\n                  <iframe \n                    src="https://player.vimeo.com/video/'.concat(e,'" \n                    class="absolute top-0 left-0 w-full h-full rounded-lg"\n                    frameborder="0" \n                    allowfullscreen>\n                  </iframe>\n                </div>\n                ').concat(t.title?'<p class="text-sm font-medium text-gray-900 mt-2">'.concat(t.title,"</p>"):"","\n              </div>\n            "))}else r='\n            <div class="my-6">\n              <video controls class="w-full rounded-lg">\n                <source src="'.concat(t.url,'" type="video/mp4">\n                Your browser does not support the video tag.\n              </video>\n              ').concat(t.title?'<p class="text-sm font-medium text-gray-900 mt-2">'.concat(t.title,"</p>"):"","\n            </div>\n          ");["[VIDEO_".concat(n,"]"),"{{VIDEO_".concat(n,"}}"),"\x3c!--VIDEO_".concat(n,"--\x3e")].forEach(t=>{e[t]=r})}),n.tweets&&n.tweets.length>0&&n.tweets.forEach((t,n)=>{let r='\n          <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 my-6">\n            <div class="flex items-start space-x-3">\n              <div class="flex-shrink-0">\n                <div class="w-12 h-12 bg-blue-400 rounded-full flex items-center justify-center">\n                  <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 24 24">\n                    <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>\n                  </svg>\n                </div>\n              </div>\n              <div class="flex-1 min-w-0">\n                <p class="text-sm font-medium text-gray-900">'.concat(t.author||"Twitter User",'</p>\n                <p class="text-sm text-gray-700 mt-1">').concat(t.content||"",'</p>\n                <a href="').concat(t.url,'" target="_blank" rel="noopener noreferrer" class="text-blue-500 text-sm hover:underline mt-2 inline-block">\n                  View on Twitter â†’\n                </a>\n              </div>\n            </div>\n          </div>\n        ');["[TWEET_".concat(n,"]"),"{{TWEET_".concat(n,"}}"),"\x3c!--TWEET_".concat(n,"--\x3e")].forEach(t=>{e[t]=r})});let r=o(t);Object.entries(e).forEach(e=>{let[t,n]=e,s=RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g");r=r.replace(s,n)}),l(r)},[t,n]);let c=e=>{let t=e.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/);return t?t[1]:null},i=e=>{let t=e.match(/vimeo\.com\/(?:video\/)?(\d+)/);return t?t[1]:null};return(0,r.jsx)("div",{className:"prose prose-lg max-w-none mb-8",dangerouslySetInnerHTML:{__html:a}})}},3590:(e,t,n)=>{"use strict";n.d(t,{default:()=>i});var r=n(5155),s=n(2115),a=n(2108),l=n(3464),o=n(7581),c=n(6766);function i(e){let{articleId:t}=e,{data:n}=(0,a.useSession)(),[i,u]=(0,s.useState)([]),[d,m]=(0,s.useState)(""),[f,p]=(0,s.useState)(!1),[v,h]=(0,s.useState)(""),[b,g]=(0,s.useState)(!1),[y,x]=(0,s.useState)({isVisible:!1,message:"",type:"success"}),w=(0,s.useCallback)(async()=>{if(!navigator.onLine)return void h("Failed to load comments (offline)");try{let e=await l.A.get("".concat("http://localhost:5000","/api/comments/").concat(t),{timeout:1e4});u(e.data)}catch(r){let t="Failed to load comments";if("object"==typeof r&&null!==r){var e,n;(null==(n=r.response)||null==(e=n.data)?void 0:e.message)&&(t=r.response.data.message)}h(t)}},[t]);(0,s.useEffect)(()=>{w()},[t,w]),(0,s.useEffect)(()=>{let e=()=>{g(!1),(v.includes("will be posted")||v.includes("will load"))&&h("")},t=()=>{g(!0)};return window.addEventListener("online",e),window.addEventListener("offline",t),g(!navigator.onLine),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}},[v]);let j=async e=>{if(e.preventDefault(),d.trim()){if(h(""),p(!0),!navigator.onLine){g(!0),h("Comment will be posted once you get connected"),p(!1);return}try{let e=await l.A.post("".concat("http://localhost:5000","/api/comments/").concat(t),{content:d},{headers:{Authorization:"Bearer ".concat(null==n?void 0:n.backendToken)},timeout:1e4});u([e.data,...i]),m(""),h(""),x({isVisible:!0,message:"Comment posted successfully!",type:"success"})}catch(t){let e="Failed to post comment";if(navigator.onLine){if("object"==typeof t&&null!==t){var r,s;(null==(s=t.response)||null==(r=s.data)?void 0:r.message)&&(e=t.response.data.message)}}else e="Comment will be posted once you get connected",g(!0);h(e),x({isVisible:!0,message:e,type:e.includes("will be posted")||e.includes("will load")?"info":"error"})}finally{p(!1)}}};return(0,r.jsxs)("div",{className:"mt-8",children:[(0,r.jsxs)("h3",{className:"text-xl font-semibold mb-4",children:["Comments (",i.length,")"]}),n?(0,r.jsxs)("form",{onSubmit:j,className:"mb-6",children:[(0,r.jsx)("textarea",{value:d,onChange:e=>m(e.target.value),placeholder:"Write a comment...",className:"w-full p-3 border rounded-lg resize-none",rows:3,disabled:f}),(0,r.jsx)("button",{type:"submit",disabled:f||!d.trim()||b,className:"mt-2 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:f?"Posting...":b?"Offline":"Post Comment"})]}):(0,r.jsx)("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:(0,r.jsxs)("p",{children:["Please ",(0,r.jsx)("span",{className:"text-blue-600 cursor-pointer",onClick:()=>(0,a.signIn)("google"),children:"log in"})," to comment."]})}),(0,r.jsx)("div",{className:"space-y-4",children:0===i.length?(0,r.jsx)("p",{className:"text-gray-500",children:"No comments yet. Be the first to comment!"}):i.map(e=>(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[e.userAvatar&&(0,r.jsx)(c.default,{src:e.userAvatar,alt:e.userName,className:"w-8 h-8 rounded-full",width:32,height:32}),(0,r.jsx)("span",{className:"font-medium",children:e.userName}),(0,r.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,r.jsx)("p",{className:"text-gray-700",children:e.content})]},e._id))}),(0,r.jsx)(o.A,{message:y.message,type:y.type,isVisible:y.isVisible,onClose:()=>{x(e=>({...e,isVisible:!1}))},duration:4e3})]})}},4436:(e,t,n)=>{"use strict";n.d(t,{k5:()=>u});var r=n(2115),s={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(s),l=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){var r,s,a;r=e,s=t,a=n[t],(s=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function u(e){return t=>r.createElement(d,o({attr:i({},e.attr)},t),function e(t){return t&&t.map((t,n)=>r.createElement(t.tag,i({key:n},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var n,{attr:s,size:a,title:c}=e,u=function(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}(e,l),d=a||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),r.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,s,u,{className:n,style:i(i({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&r.createElement("title",null,c),e.children)};return void 0!==a?r.createElement(a.Consumer,null,e=>t(e)):t(s)}},6887:(e,t,n)=>{Promise.resolve().then(n.t.bind(n,6874,23)),Promise.resolve().then(n.t.bind(n,3063,23)),Promise.resolve().then(n.bind(n,813)),Promise.resolve().then(n.bind(n,3590))},7581:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(5155),s=n(2115),a=n(9911);let l=e=>{let{message:t,type:n="success",isVisible:l,onClose:o,duration:c=4e3}=e,[i,u]=(0,s.useState)(!1);return((0,s.useEffect)(()=>{if(l){u(!0);let e=setTimeout(()=>{u(!1),setTimeout(()=>{o()},300)},c);return()=>clearTimeout(e)}},[l,c,o]),l)?(0,r.jsx)("div",{className:"fixed bottom-4 left-4 right-4 sm:left-1/2 sm:transform sm:-translate-x-1/2 sm:max-w-sm z-[9999] px-0 sm:px-4",children:(0,r.jsx)("div",{className:"\n          ".concat((()=>{switch(n){case"success":default:return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"info":return"bg-yellow-100 border-yellow-200"}})(),"\n          ").concat((()=>{switch(n){case"success":default:return"text-green-800";case"error":return"text-red-800";case"info":return"text-yellow-800"}})(),"\n          border rounded-lg shadow-lg p-4\n          transform transition-all duration-300 ease-out\n          ").concat(i?"translate-y-0 opacity-100 scale-100":"translate-y-full opacity-0 scale-95","\n        "),children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(n){case"success":default:return(0,r.jsx)(a.A7C,{className:"h-5 w-5 text-green-500"});case"error":return(0,r.jsx)(a._Hm,{className:"h-5 w-5 text-red-500"});case"info":return(0,r.jsx)(a.__w,{className:"h-5 w-5 text-yellow-600"})}})()}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("p",{className:"text-sm font-medium text-center sm:text-left",children:t})})]})})}):null}}},e=>{var t=t=>e(e.s=t);e.O(0,[711,259,108,464,441,684,358],()=>t(6887)),_N_E=e.O()}]);