(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{3246:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var l=t(5155),a=t(2108),r=t(2115),n=t(3464),i=t(6874),c=t.n(i),d=t(6766);function o(){let{data:e}=(0,a.useSession)(),[s,t]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0),m=(0,r.useCallback)(async()=>{try{let s=await n.A.get("".concat("http://localhost:5000","/api/comments/user/history"),{headers:{Authorization:"Bearer ".concat(null==e?void 0:e.backendToken)}});t(s.data)}catch(e){console.error("Failed to fetch user comments")}o(!1)},[null==e?void 0:e.backendToken]);if((0,r.useEffect)(()=>{(null==e?void 0:e.user)&&m()},[e,m]),!e)return(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Profile"}),(0,l.jsx)("p",{children:"Please log in to view your profile."})]});let h=e.user;return(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Profile"}),(0,l.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(null==h?void 0:h.image)&&(0,l.jsx)(d.default,{src:h.image,alt:h.name||"User",className:"w-16 h-16 rounded-full",width:64,height:64}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:null==h?void 0:h.name}),(0,l.jsx)("p",{className:"text-gray-600",children:null==h?void 0:h.email})]})]}),(0,l.jsx)("button",{onClick:()=>(0,a.signOut)(),className:"mt-2 px-4 py-2 cursor-pointer rounded bg-gray-100 hover:bg-gray-200 text-sm font-medium border border-gray-200 text-gray-800",children:"Logout"})]}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("h2",{className:"text-xl font-semibold mb-4",children:["Your Comments (",s.length,")"]}),i?(0,l.jsx)("p",{children:"Loading comments..."}):0===s.length?(0,l.jsx)("p",{className:"text-gray-500",children:"You haven't commented on any articles yet."}):(0,l.jsx)("div",{className:"space-y-4",children:s.filter(e=>e.articleId&&e.articleId.slug).map(e=>(0,l.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,l.jsx)(c(),{href:"/article/".concat(e.articleId.slug),className:"font-medium text-blue-600 hover:underline",children:e.articleId.title}),(0,l.jsx)("span",{className:"text-gray-500 text-sm",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,l.jsx)("p",{className:"text-gray-700",children:e.content})]},e._id))})]})]})}},9274:(e,s,t)=>{Promise.resolve().then(t.bind(t,3246))}},e=>{var s=s=>e(e.s=s);e.O(0,[259,108,464,441,684,358],()=>s(9274)),_N_E=e.O()}]);